<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.dotogether.comment.model.dao.CommentMapper">
	<insert id="insertComment">
		INSERT
		INTO
			TB_CHALLENGE_COMMENT
			(
				COMMENT_NO,
				COMMENT_CONTENT,
				COMMENT_WRITER,
				COMMENT_FILE_URL,
				REF_BOARD_NO
			)
		VALUES
			(
				SEQ_COMMENT_NO.NEXTVAL,
				#{commentContent},
				#{commentWriter},
				#{commentFileUrl},
				#{refBoardNo}
			)
	</insert>
	<select id="selectCommentList"
			parameterType="long"
			resultType="com.kh.dotogether.comment.model.dto.CommentDTO">
		SELECT
			COMMENT_NO commentNo,
			REF_BOARD_NO refBoardNo,
			USER_ID commentWriter,
			COMMENT_CONTENT commentContent,
			CREATE_DATE createDate
		FROM
			TB_CHALLENGE_COMMENT
		JOIN
			TB_USER ON (COMMENT_WRITER = USER_NO)
		AND
			TB_CHALLENGE ON (REF_BOARD_NO = CHALLENGE_NO)
		WHERE
			REF_BOARD_NO = #{boardNo}
		ORDER BY
			CREATE_DATE DESC
	</select>
</mapper>